!function(e){e.fn.timePicker=function(t){let i=e.extend({mode:24,secondGap:5,enableHour:!0,enableSecond:!0,inputName:"time",default:"00:00",value:this.default,change:function(e){},selectedValue:function(e){},_setValue:function(e){this.value=e}},t),n=38,a=40,l=13;function r(e){return Math.random().toString(36).replace("0.",e||"")}let s=r("picker"),o=r("picker__slot"),c=r("pickerlist"),d=r("picker__input");function u(e){return`<li tabindex="-1" role="option" aria-selected="false" class="picker__item" data-value="${e}" id="${r("pi_")}">${e}</li>`}e(this).append(`\n            <div class='picker' id="${s}">\n                <div class="picker__slot" id="${o}">\n                    <div class="picker__controls">\n                    <input type="text" name="${i.inputName}" id="${d}" class="picker__input" value="${i.default||i.value}" alt="Type time in hours and minutes" maxlength="5" role="combobox" aria-haspopup="listbox" aria-owns="pickerlist" aria-autocomplete="none" aria-expanded="false">\n                    <ol class="picker__list" id="${c}" tabindex="0" role="listbox" aria-labelledby="pickerheader" aria-activedescendant=""></ol>\n                    </div>\n                </div>\n            </div>\n        `),e(`#${c}`,this).append(function(e=24,t=1){if(i.enableHour&&i.enableSecond)return function(e=24,t=1){let i="",n=[],a=[];for(let e=0;e<=59;e+=t){let t=e.toString().padStart(2,"0");a.push(t)}if(12===e){for(let e=1;e<=12;e++){let t=e.toString().padStart(2,"0");n.push(t)}["AM","PM"].forEach(function(e){n.forEach(function(t){a.forEach(function(n){i+=u(`${t}:${n} ${e}`)})})})}if(24===e){for(let e=0;e<=23;e++){let t=e.toString().padStart(2,"0");n.push(t)}n.forEach(function(e){a.forEach(function(t){i+=u(`${e}:${t}`)})})}return i}(e,t);if(i.enableHour)return function(e=24){let t="";12===e&&["AM","PM"].forEach(function(e){for(let i=1;i<=12;i++){i.toString().padStart(2,"0");t+=u(`${i}${e}`)}});if(24===e)for(let e=0;e<=23;e++){let i=e.toString().padStart(2,"0");t+=u(i)}return t}(e);if(i.enableSecond)return function(e=1){let t="";for(let i=0;i<=59;i+=e){let e=i.toString().padStart(2,"0");t+=u(e)}return t}(t)}(i.mode,i.secondGap));const p=document.getElementById(s),f=document.getElementById(d);let g=document.getElementById(c),h=document.querySelectorAll(`#${c} li`);h=[...h];const m=()=>{g.classList.remove("is-open"),f.setAttribute("aria-expanded","false")},v=(e="next")=>{let t=g.querySelector(".picker__item.is-highlighted");t&&(t.classList.remove("is-highlighted"),t.setAttribute("tabindex",-1),"prev"==e?null==(t=((e,t)=>{for(console.log("prevuntil",e,t);e.previousElementSibling&&!e.previousElementSibling.classList.contains(t);)e=e.previousElementSibling;return e.previousElementSibling})(t,"picker__item"))&&(t=g.lastElementChild):null==(t=((e,t)=>{for(console.log("nextUntil",e,t);e.nextElementSibling&&!e.nextElementSibling.classList.contains(t);)e=e.nextElementSibling;return e.nextElementSibling})(t,"picker__item"))&&(t=g.firstElementChild),t.focus(),t.setAttribute("tabindex",0),t.classList.add("is-highlighted"))},b=e=>{e||(e=window.event);let t=e.keyCode||e.which;return t!=n&&t!=a||(e.preventDefault(),e.stopPropagation()),t==n&&v("prev"),t==a&&v("next"),t==l&&e.target.matches("li")&&(E(e.target),e.stopPropagation()),!1};f.addEventListener("keydown",e=>{b(e)}),g.addEventListener("keydown",e=>{b(e)});const S=e=>{let t=(e=>{let t=e.split(":"),i=parseInt(t[1]);return i<30?i="00":i>30&&(i="30"),e=`${t[0]}:${i}`,h.find(t=>t.innerText==e)})(e);t&&(t.classList.add("is-highlighted"),t.scrollIntoView())},E=e=>{let t=e.innerText;_(t),e.setAttribute("aria-selected","true"),g.setAttribute("aria-activedescendant",e.id),m()};g.addEventListener("click",t=>{let n=e(t.target);if(i.change(n),i.selectedValue(n.attr("data-value")),i._setValue(n.attr("data-value")),e(d).val(n.attr("data-value")),t.target.matches("li"))return E(t.target),t.stopPropagation(),t.preventDefault(),!1}),f.addEventListener("focusin",()=>{g.classList.add("is-open"),f.setAttribute("aria-expanded","true"),S(f.value)});const _=e=>{let t,i;if(g.setAttribute("aria-activedescendant",""),h.forEach(e=>{e.classList.remove("is-highlighted"),e.setAttribute("aria-selected","false")}),e.includes("+")?(i="+",t=((e,t)=>e+t)):e.includes("-")&&(i="-",t=((e,t)=>e-t)),t){let n=(e=e.replace(i,"")).split(":"),a=f.value.split(":"),l=t(parseInt(a[1]),parseInt(n[1])),r=t(parseInt(a[0]),parseInt(n[0]));l>59?(r+=1,l-=60):l<0&&(r-=1,l=60+l),r>23?r=0:r<0&&(r=23),e=`${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`}f.value=e};document.addEventListener("click",e=>{p.contains(e.target)&&e.target!=p||m()})}}(jQuery);