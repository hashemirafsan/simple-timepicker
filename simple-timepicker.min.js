!function(e){e.fn.timePicker=function(t){let i=e.extend({mode:24,secondGap:5,enableHour:!0,enableSecond:!0,inputName:"time"},t),n=38,r=40,a=13;function l(e=24){let t="";if(12===e&&["AM","PM"].forEach(function(e){for(let i=1;i<=12;i++){i.toString().padStart(2,"0");t+=s(`${i}${e}`)}}),24===e)for(let e=0;e<=23;e++){let i=e.toString().padStart(2,"0");t+=s(i)}return t}function s(e){return`<li tabindex="-1" role="option" aria-selected="false" class="picker__item" id="pi1">${e}</li>`}e(this).append(`\n      <div class='picker'>\n          <div class="picker__slot">\n            <div class="picker__controls">\n              <input type="text" name="${i.inputName}" class="picker__input" value="08:00" alt="Type time in hours and minutes" maxlength="5" role="combobox" aria-haspopup="listbox" aria-owns="pickerlist" aria-autocomplete="none" aria-expanded="false">\n              <ol class="picker__list" id="pickerlist" tabindex="0" role="listbox" aria-labelledby="pickerheader" aria-activedescendant=""></ol>\n            </div>\n          </div>\n      </div>\n      `),e(".picker__list",this).append(function(e=24,t=1){if(i.enableHour&&i.enableSecond)return function(e=24,t=1){let i="",n=[],r=[];for(let e=0;e<=59;e+=t){let t=e.toString().padStart(2,"0");r.push(t)}if(12===e){for(let e=1;e<=12;e++){let t=e.toString().padStart(2,"0");n.push(t)}["AM","PM"].forEach(function(e){n.forEach(function(t){r.forEach(function(n){i+=s(`${t}:${n} ${e}`)})})})}if(24===e){for(let e=0;e<=23;e++){let t=e.toString().padStart(2,"0");n.push(t)}n.forEach(function(e){r.forEach(function(t){i+=s(`${e}:${t}`)})})}return i}(e,t);if(i.enableHour)return l(e);if(i.enableSecond)return l(t)}(i.mode,i.secondGap));const o=document.querySelector(".picker"),c=document.querySelector(".picker__input");let d=document.querySelector(".picker__list"),u=document.querySelectorAll(".picker__list li");u=[...u];const p=()=>{d.classList.remove("is-open"),c.setAttribute("aria-expanded","false")},f=(e="next")=>{let t=d.querySelector(".picker__item.is-highlighted");t&&(t.classList.remove("is-highlighted"),t.setAttribute("tabindex",-1),"prev"==e?null==(t=((e,t)=>{for(console.log("prevuntil",e,t);e.previousElementSibling&&!e.previousElementSibling.classList.contains(t);)e=e.previousElementSibling;return e.previousElementSibling})(t,"picker__item"))&&(t=d.lastElementChild):null==(t=((e,t)=>{for(console.log("nextUntil",e,t);e.nextElementSibling&&!e.nextElementSibling.classList.contains(t);)e=e.nextElementSibling;return e.nextElementSibling})(t,"picker__item"))&&(t=d.firstElementChild),t.focus(),t.setAttribute("tabindex",0),t.classList.add("is-highlighted"))},g=e=>{e||(e=window.event);let t=e.keyCode||e.which;return t!=n&&t!=r||(e.preventDefault(),e.stopPropagation()),t==n&&f("prev"),t==r&&f("next"),t==a&&e.target.matches("li")&&(m(e.target),e.stopPropagation()),!1};c.addEventListener("keydown",e=>{g(e)}),d.addEventListener("keydown",e=>{g(e)});const h=e=>{let t=(e=>{let t=e.split(":"),i=parseInt(t[1]);return i<30?i="00":i>30&&(i="30"),e=`${t[0]}:${i}`,u.find(t=>t.innerText==e)})(e);t.classList.add("is-highlighted"),t.scrollIntoView()},m=e=>{let t=e.innerText;b(t),e.setAttribute("aria-selected","true"),d.setAttribute("aria-activedescendant",e.id),p()};d.addEventListener("click",e=>{if(console.log("list click",e.target),e.target.matches("li"))return m(e.target),e.stopPropagation(),e.preventDefault(),!1}),c.addEventListener("focusin",()=>{d.classList.add("is-open"),c.setAttribute("aria-expanded","true"),h(c.value)});const b=e=>{let t,i;if(d.setAttribute("aria-activedescendant",""),u.forEach(e=>{e.classList.remove("is-highlighted"),e.setAttribute("aria-selected","false")}),e.includes("+")?(i="+",t=((e,t)=>e+t)):e.includes("-")&&(i="-",t=((e,t)=>e-t)),t){let n=(e=e.replace(i,"")).split(":"),r=c.value.split(":"),a=t(parseInt(r[1]),parseInt(n[1])),l=t(parseInt(r[0]),parseInt(n[0]));a>59?(l+=1,a-=60):a<0&&(l-=1,a=60+a),l>23?l=0:l<0&&(l=23),e=`${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}c.value=e};document.addEventListener("click",e=>{o.contains(e.target)&&e.target!=o||p()})}}(jQuery);